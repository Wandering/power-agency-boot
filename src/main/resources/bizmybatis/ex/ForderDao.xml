<?xml version="1.0" encoding="UTF-8"?>
<!DOCTYPE mapper PUBLIC "-//mybatis.org//DTD Mapper 3.0//EN" "http://mybatis.org/dtd/mybatis-3-mapper.dtd">

<mapper namespace="com.power.dao.ex.ForderDao">

	<select id="queryOrderModel" resultType="java.util.HashMap">
		SELECT ord.*,l.* FROM orders ord,order_line l 
		 <where>
			                <!-- ######订单记录###### -->
			      ord.id= l.order_id 
                <if test="orderOwner!=null and orderOwner.trim()!=''">
                   AND `order_owner` like concat('%',#{orderOwner},'%')
                </if>
			                <!-- 订单id -->
                <if test="id!=null and id.trim()!=''">
                  AND `order_id` like concat('%',#{id},'%')
                </if>
                <if test="orderStatus!=null and orderStatus.trim()!=''">
                    AND ord.status = #{orderStatus}
                </if>
                            <!-- 開始結束時間 -->
				<if test="startDt!=null and startDt!=''">
				　　AND l.start_dt &gt;=#{startDt} 
				</if> 
				<if test="endDt!=null and endDt!=''">
				 　　AND  l.end_dt &lt;=#{endDt} 
				</if>
				<if test="offset != null and limit != null">
			       limit #{offset}, #{limit}
		        </if>
	    </where>
	</select>

	<select id="queryTotal" resultType="int">
		SELECT count(*)  FROM orders ord,order_line l 
		 <where>
		            ord.id= l.order_id 
			                <!-- ######订单记录###### -->
                <if test="orderOwner!=null and orderOwner.trim()!=''">
                    AND `order_owner` like concat('%',#{orderOwner},'%')
                </if>
                            <!-- 订单id -->
                 <if test="id!=null and id.trim()!=''">
                   AND `order_id` like concat('%',#{id},'%')
                </if>
			    <if test="orderStatus!=null and orderStatus.trim()!=''">
                    AND ord.status = #{orderStatus}
                </if>
                            <!-- 開始結束時間 -->
				<if test="startDt!=null and startDt!=''">
				　　AND start_dt&gt;=#{startDt} 
				</if> 
				<if test="endDt!=null and endDt!=''">
				 　　AND  end_dt &lt;=#{endDt} 
				</if>
				
	    </where>
	</select>
	<select id="queryStationModel" resultType="java.util.HashMap">
		select id,model,slot_no slotNo,channel from station_model order by id
	</select>

	<select id="queryPowerModel" resultType="java.util.HashMap">
		select id,model from power_model order by id
	</select>

</mapper>